<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Email Processing</title>
  <meta name="description" content="">

  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
  <!-- Optional theme -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
  <link rel="stylesheet" href="/css/custom.css">
  <link rel="stylesheet" href="/css/syntax.css">
  <link rel="canonical" href="http://docs.diamantedesk.com/en/latest/user-guide/channels/email-processing.html">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  <script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-53130831-2', 'docs.diamantedesk.com');
    ga('require', 'displayfeatures');
    ga('send', 'pageview');
</script>

</head>

  <body>
  <header class="site-header">

  <nav class="navbar navbar-default navbar-static-top">
    <div class="container-fluid">
      <div class="navbar-header">
        <span class="navbar-brand">DiamanteDesk Documentation</span>
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
      </div>
      <div class="navbar-collapse collapse">
        <ul class="nav navbar-nav">
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">English<span class="caret"></span></a>
            <ul class="dropdown-menu">
              
                <li><a href="/en/latest/user-guide/channels/email-processing.html">English</a></li>
              
            </ul>
          </li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">latest version<span class="caret"></span></a>
            <ul class="dropdown-menu">
              
                <li><a href="/en/1.0/user-guide/channels/email-processing.html">1.0</a></li>
              
                <li><a href="/en/latest/user-guide/channels/email-processing.html">latest</a></li>
              
                <li><a href="/en/2.0/user-guide/channels/email-processing.html">2.0</a></li>
              
            </ul>
          </li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
          <form action="/en/latest/search.html" method="get" class="navbar-form">
            <div class="form-group">
              <input type="text" name="q" placeholder="Search" class="form-control search-query" autocomplete="off" />
            </div>
          </form>
        </ul>
      </div><!--/.nav-collapse -->
    </div>
  </nav>

</header>

    <div class="container-fluid">
      <div class="row">
        <div class="col-xs-12 col-sm-4 col-md-3">
    <nav id="navbar" class="hidden-print navbar-collapse collapse">
        <div class="visible-xs-block">
            <ul class="nav">
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">English<span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        
                        <li><a href="/en/latest/user-guide/channels/email-processing.html">English</a></li>
                        
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">latest version<span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        
                        <li><a href="/en/1.0/user-guide/channels/email-processing.html">1.0</a></li>
                        
                        <li><a href="/en/latest/user-guide/channels/email-processing.html">latest</a></li>
                        
                        <li><a href="/en/2.0/user-guide/channels/email-processing.html">2.0</a></li>
                        
                    </ul>
                </li>
            </ul>
            <ul class="nav">
                <form action="/en/latest/search.html" method="get" class="navbar-form">
                    <div class="form-group">
                        <input type="text" name="q" placeholder="Search" class="form-control search-query" autocomplete="off" />
                    </div>
                </form>
            </ul>
        </div>
        <ul data-spy="affix" data-offset-top="60" class="nav bs-docs-sidenav">
            <li><a href="/en/latest/">Welcome to DiamanteDesk</a></li><li><a href="/en/latest/installation-guide/">Installation Guide</a></li><li><a href="/en/latest/upgrade-guide/">Upgrade Guide</a></li><li><a href="/en/latest/user-guide/">User Guide</a><ul><li><a href="/en/latest/user-guide/dashboards.html">Dashboards</a></li><li><a href="/en/latest/user-guide/branches.html">Branches</a></li><li><a href="/en/latest/user-guide/tickets.html">Tickets</a></li><li><a href="/en/latest/user-guide/reports.html">Reports</a></li><li><a href="/en/latest/user-guide/customers.html">Customers</a></li><li><a href="/en/latest/user-guide/users.html">Users / Roles / Groups</a></li><li><a href="/en/latest/user-guide/tagging.html">Tagging</a></li><li><a href="/en/latest/user-guide/data-audit.html">Data Audit</a></li><li><a href="/en/latest/user-guide/filters.html">Filters</a></li><li><a href="/en/latest/user-guide/rules.html">Rules</a></li><li><a href="/en/latest/user-guide/channels/">Channels</a><ul><li><a href="/en/latest/user-guide/channels/email-processing.html">Email Processing</a><ul>
<li>
<a href="#configuration">Configuration</a>
</li>
<li>
<a href="#run-email-processing">Run Email Processing</a>
</li>
</ul>
</li><li><a href="/en/latest/user-guide/channels/portal.html">Portal</a></li><li><a href="/en/latest/user-guide/channels/embedded-form.html">Embedded Form</a></li></ul></li></ul></li><li><a href="/en/latest/developer-guide/">Developer Guide</a><ul><li><a href="/en/latest/developer-guide/contributing.html">Contributing</a></li><li><a href="/en/latest/developer-guide/testing.html">Testing</a></li><li><a href="/en/latest/developer-guide/restful-api-guide.html">RESTful API Guide</a></li><li><a href="/en/latest/developer-guide/localizations.html">Localizations</a></li></ul></li><li><a href="/en/latest/integration/">Integration</a><ul><li><a href="/en/latest/integration/api-credentials.html">Acquiring API Credentials</a></li><li><a href="/en/latest/integration/magento.html">Magento</a></li><li><a href="/en/latest/integration/wordpress.html">WordPress</a></li><li><a href="/en/latest/integration/prestashop.html">PrestaShop</a></li><li><a href="/en/latest/integration/oro.html">OroCRM</a></li></ul></li><li><a href="/en/latest/faq/">FAQ</a></li>
        </ul>
    </nav>
</div>
        <div class="col-xs-12 col-sm-8 col-md-9">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">Email Processing</h1>
  </header>

  <article class="post-content">
    <p>DiamanteDesk supports 4 possible options of contacting a help desk team in order to create a new ticket and make a request or report an issue. Any user can do it through the <a href="portal.html">Portal</a> or <a href="embedded-form.html">Embedded Form</a>, over the phone call or by sending an email to the support email account.</p>

<p>All the emails that get to the support email account (or email alias) are retrieved by the DiamanteDesk system in order to create a separate ticket out of each received letter. Tickets are created either at a single default branch or in different branches depending on the specific support address from the email alias. </p>

<h2 id="configuration">Configuration</h2>

<p>Most of the medium and large size companies use support email alias addresses (such as <a href="mailto:support@companyname.com">support@companyname.com</a>, <a href="mailto:info@companyname.com">info@companyname.com</a>, <a href="mailto:hq@companyname.com">hq@companyname.com</a>, <a href="mailto:sales@companyname.com">sales@companyname.com</a>) but in fact, all the emails that are sent to these addresses are stored at a single support account. DiamanteDesk allows converting all these emails into the support tickets automatically and these tickets can be distributed to different branches depending on the email address they were sent to. Alternatively, all the created tickets are stored at a single branch, defined as a default one at <em>System &gt; Configuration</em>.</p>

<p>To make sure that all customer requests sent to the defined email account are converted into tickets by the system, the email processing feature shall be configured properly.</p>

<h3 id="how-to-set-up-a-support-account">How to set up a support account</h3>

<p>Go to <em>System &gt; Configuration</em>. </p>

<p>On the <strong>System Configuration</strong> pane select the <strong>DiamanteDesk</strong> menu and <strong>Channels</strong> tab.</p>

<p>The <strong>Channels</strong> screen opens.</p>

<p><img src="img/channels.png" alt="Channels"></p>

<p>Configure the <strong>Email</strong> section to set up an email account. All the fields in the <strong>Email</strong> section are required fields and each of them has specific default settings. To use the default settings, select the <strong>Use Default</strong> check box in the corresponding field. To edit the configurations, clear the <strong>Use Default</strong> check box in the corresponding field and specify the necessary value.</p>

<p><img src="img/email.png" alt="Email"></p>

<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Server Address</td>
<td>Specify the server address of the support account (for example, imap.google.com)</td>
</tr>
<tr>
<td>Port</td>
<td>Provide the port number. <em>Hint:</em> It is typically on port 143. But IMAP over SSL is usually on port 993.</td>
</tr>
<tr>
<td>SSL</td>
<td>Specify whether you want to use a secure connection (SSL) when retrieving your mail. Select <strong>Yes</strong> or <strong>No</strong> option.</td>
</tr>
<tr>
<td>Username</td>
<td>Provide the email account (for example, <a href="mailto:support@diamantedesk.com">support@diamantedesk.com</a>).</td>
</tr>
<tr>
<td>Password</td>
<td>Provide the password to access email account.</td>
</tr>
</tbody></table>

<h3 id="how-to-distribute-tickets-to-different-branches">How to distribute tickets to different branches</h3>

<p>Tickets created from emails can be distributed to different branches depending on the email account they were sent to. For example, tickets sent to <a href="mailto:info@companyname.com">info@companyname.com</a> can be added to the &ldquo;Info&rdquo; branch, same as tickets sent to <a href="mailto:support@companyname.com">support@companyname.com</a> can be added to the &ldquo;Support&rdquo; branch. Branch logic helps to organize tickets in a way to keep track of the tickets according to a certain category and quickly find them in a system. This option can be configured directly at the <strong>Email Configuration</strong> section of the <strong>Branch</strong> configuration screen when the branch is created or open the required branch and click <strong>Edit</strong>.</p>

<p><img src="img/email_config.png" alt="Email"></p>

<p>Provide the support email address relevant to this branch in the <strong>Support Address</strong> field (for example, it is a good idea to add all the tickets sent to <a href="mailto:sales@companyname.com">sales@companyname.com</a> to the &ldquo;Sales&rdquo; branch) and the customer domain name (for example, eltrino.com) to add all the emails sent from the email address with such customer domain to a specific branch.</p>

<h3 id="how-to-add-tickets-to-a-single-branch">How to add tickets to a single branch</h3>

<p>To configure the email processing in a way when all the tickets created from emails are added to a single default branch, go to <em>System &gt; Configuration</em>. On the <strong>System Configuration</strong> pane select the <strong>DiamanteDesk</strong> menu and <strong>Channels</strong> tab. The <strong>Channels</strong> screen opens.</p>

<p>In the <strong>General</strong> section select a default branch for email processing. All the newly created tickets will automatically get to the specified branch.
To set one of the existing default branches as default one, make sure that the <strong>Use Default</strong> check box is clear, click the down arrow in the <strong>Default Branch</strong> field and select the required branch from the drop-down list. If the <strong>Use Default</strong> check box is selected, the branch that was created in the system first becomes a default one.</p>

<blockquote>
<p><em>Note:</em>  A branch configured as a default one cannot be deleted.</p>
</blockquote>

<p>After all the necessary information has been provided, click <strong>Save Settings</strong> at the right top part of the screen.</p>

<h2 id="run-email-processing">Run Email Processing</h2>

<p>You can also run and configure email processing from the console. Two commands are available:</p>

<ul>
<li>using IMAP protocol for email retrieval from a remote email server.</li>
</ul>

<div class="highlight"><pre><code class="language-php" data-lang="php">php app/console oro:cron:diamante:emailprocessing:general</code></pre></div>

<p>This command may be configured through a crontab, allowing to send polls periodically on a given schedule it&rsquo;s perfect for retrieving emails from the remote server.</p>

<ul>
<li>or using the email piping method:</li>
</ul>

<div class="highlight"><pre><code class="language-php" data-lang="php">php app/console diamante:emailprocessing:pipe <span class="err">&lt;</span>  /path/to/emails/stream</code></pre></div>

<p>This command is only applicable when DiamanteDesk and email server are installed on the same server machine. It includes piping method which has a remarkable advantage over a IMAP, as,  when using piping, all the emails get to the system and are converted into tickets or comments <strong>immediately</strong>, unlike when using IMAP which sends polls to the remote server within scheduled time (at least 1 minute). This advantage allows to quicky react on customer requests or solve any issues on a real-time basis.</p>

  </article>

</div>

        </div>
      </div>
    </div>
    <footer class="site-footer">

</footer>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
<script src="/js/vendor/mustache.js/mustache.min.js" type="text/javascript" charset="utf-8"></script>
<script src="/js/vendor/date-steroids/dist/date.js" type="text/javascript" charset="utf-8"></script>
<script src="/js/vendor/URIjs/src/URI.min.js" type="text/javascript" charset="utf-8"></script>
<script src="/js/vendor/lunr.js/lunr.min.js" type="text/javascript" charset="utf-8"></script>
<script src="/js/vendor/jquery-highlight/jquery.highlight.js" type="text/javascript" charset="utf-8"></script>
<script src="/js/jquery.lunr.search.js" type="text/javascript" charset="utf-8"></script>
<script>
    if (location.hash && location.hash.indexOf('highlight=') > -1) {
        $('.post-content').highlight(location.hash.split('=')[1]);
    }

    var screenshot = $('img:not(img[src$="logo.png"])');

    screenshot.click(function() {

        $(this).toggleClass('zoom-image');

    });
</script>

  </body>
</html>
